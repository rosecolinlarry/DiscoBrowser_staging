<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-P8QLZVZ7");
    </script>
    <!-- End Google Tag Manager -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EQZGTXEB26"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EQZGTXEB26');
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23C0C0C0'/%3E%3Ccircle cx='35' cy='30' r='8' fill='%23FFD700'/%3E%3Ccircle cx='65' cy='35' r='6' fill='%2387CEEB'/%3E%3Ccircle cx='30' cy='55' r='7' fill='%23FF69B4'/%3E%3Ccircle cx='70' cy='60' r='9' fill='%2398FB98'/%3E%3Ccircle cx='50' cy='70' r='6' fill='%23DDA0DD'/%3E%3Ccircle cx='55' cy='45' r='5' fill='%23FFA500'/%3E%3C/svg%3E"
    />
    <title>Disco Browser</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-P8QLZVZ7"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div
      id="mobileSearchScreen"
      class="mobile-search-screen"
      style="display: none"
    >
      <div class="mobile-search-header">
        <button id="mobileSearchBack" class="mobile-back-btn">
          <div
            class="icon-placeholder"
            data-icon-template="icon-back-template"
            data-icon-size="30px"
          ></div>
        </button>
        <div class="mobile-search-input-wrapper">
          <label for="mobileSearchInput" class="search-input-label"
            >Search</label
          >
          <input
            id="mobileSearchInput"
            class="search-input"
            type="text"
            placeholder="Search text..."
          />
          <button class="clear-search-icon" id="mobileSearchClearIcon">
            <div
              class="icon-placeholder"
              data-icon-template="icon-close-template"
              data-icon-size="30px"
            ></div>
          </button>
        </div>
        <button id="mobileSearchIconBtn" class="mobile-search-icon-btn">
          <div
            class="icon-placeholder"
            data-icon-template="icon-search-template"
            data-icon-size="30px"
          ></div>
        </button>
      </div>

      <div class="mobile-search-filters">
        <button class="mobile-filter-chip" id="mobileConvoFilter">
          <span>Conversation</span>
          <span class="filter-value" id="mobileConvoFilterValue">All</span>
          <span class="dropdown-icon">
            <div
              class="icon-placeholder"
              data-icon-template="icon-chevron-right-template"
              data-icon-size="18px"
            ></div>
          </span>
        </button>
        <button class="mobile-filter-chip" id="mobileTypeFilter">
          <span>Type</span>
          <span class="filter-value" id="mobileTypeFilterValue">All</span>
          <span class="dropdown-icon">
            <div
              class="icon-placeholder"
              data-icon-template="icon-chevron-right-template"
              data-icon-size="18px"
            ></div>
          </span>
        </button>
        <button class="mobile-filter-chip" id="mobileActorFilter">
          <span>Actors</span>
          <span class="filter-value" id="mobileActorFilterValue">All</span>
          <span class="dropdown-icon">
            <div
              class="icon-placeholder"
              data-icon-template="icon-chevron-right-template"
              data-icon-size="18px"
            ></div>
          </span>
        </button>
        <button class="mobile-filter-clear" id="mobileClearFilters">
          <span>Clear Filters</span>
        </button>
      </div>

      <div class="mobile-search-options">
        <label class="mobile-option-toggle">
          <input type="checkbox" id="mobileWholeWordsCheckbox" />
          <span class="toggle-slider"></span>
          <span class="toggle-label">Whole Words</span>
        </label>
      </div>

      <div
        id="mobileSearchCount"
        class="mobile-search-count"
        style="display: none"
      ></div>

      <div class="loader hidden" id="mobileSearchLoader"></div>

      <div id="mobileSearchResults" class="mobile-search-results">
        <div class="mobile-search-prompt">
          Enter a search term to find dialogues
        </div>
      </div>
    </div>

    <!-- Mobile Conversation Filter Screen -->
    <div
      id="mobileConvoFilterScreen"
      class="mobile-filter-screen"
      style="display: none"
    >
      <div class="mobile-filter-header">
        <button class="mobile-back-btn" id="mobileConvoFilterBack">
          <div
            class="icon-placeholder"
            data-icon-template="icon-back-template"
            data-icon-size="30px"
          ></div>
        </button>
        <h3>Filter by Conversation</h3>
      </div>
      <label for="mobileConvoFilterSearch" class="search-input-label"
        >Search</label
      >
      <input
        type="text"
        class="mobile-filter-search"
        id="mobileConvoFilterSearch"
        placeholder="Search conversations..."
      />
      <div class="mobile-filter-actions">
        <label class="mobile-checkbox-item">
          <input type="checkbox" id="mobileConvoSelectAll" />
          <span>Select All</span>
        </label>
        <button id="mobileConvoAddToSelection" class="mobile-action-btn">
          Add to Selection
        </button>
      </div>
      <div id="mobileConvoFilterList" class="mobile-filter-list"></div>
    </div>

    <!-- Mobile Actor Filter Screen -->
    <div
      id="mobileActorFilterScreen"
      class="mobile-filter-screen"
      style="display: none"
    >
      <div class="mobile-filter-header">
        <button class="mobile-back-btn" id="mobileActorFilterBack">
          <div
            class="icon-placeholder"
            data-icon-template="icon-back-template"
            data-icon-size="30px"
          ></div>
        </button>
        <h3>Filter by Actors</h3>
      </div>
      <label for="mobileActorFilterSearch" class="search-input-label"
        >Filter by Name</label
      >
      <input
        type="text"
        class="mobile-filter-search"
        id="mobileActorFilterSearch"
        placeholder="Search actors..."
      />
      <div class="mobile-filter-actions">
        <label class="mobile-checkbox-item">
          <input type="checkbox" id="mobileActorSelectAll" />
          <span>Select All</span>
        </label>
        <button id="mobileActorAddToSelection" class="mobile-action-btn">
          Add to Selection
        </button>
      </div>
      <div id="mobileActorFilterList" class="mobile-filter-list"></div>
      <div class="mobile-filter-disclaimer">
        Note: Orbs and tasks with no assigned actor are not included in
        searches.
      </div>
    </div>

    <!-- Mobile Type Filter Bottom Sheet -->
    <div
      id="mobileTypeFilterSheet"
      class="mobile-bottom-sheet"
      style="display: none"
    >
      <div class="bottom-sheet-handle"></div>
      <div class="bottom-sheet-content">
        <h4>Filter by Type</h4>
        <div class="mobile-type-options">
          <label class="mobile-checkbox-item">
            <input type="checkbox" data-type="all" checked />
            <span>All</span>
          </label>
          <label class="mobile-checkbox-item type-flow">
            <input type="checkbox" data-type="flow" />
            <span>Flow</span>
          </label>
          <label class="mobile-checkbox-item type-orb">
            <input type="checkbox" data-type="orb" />
            <span>Orb</span>
          </label>
          <label class="mobile-checkbox-item type-task">
            <input type="checkbox" data-type="task" />
            <span>Task</span>
          </label>
        </div>
        <button class="mobile-apply-btn" id="mobileTypeApply">Apply</button>
      </div>
    </div>
    <main>
      <!-- Conversation Sidebar -->
      <div id="convoSidebar" class="sidebar sidebar-left"></div>

      <!-- History Sidebar -->
      <div id="historySidebar" class="sidebar sidebar-right"></div>

      <!-- Sidebar Toggle Buttons -->
      <button
        id="convoSidebarToggle"
        class="sidebar-toggle-btn sidebar-toggle-left"
        style="display: none"
        title="Toggle conversations sidebar"
      >
        <span class="toggle-icon">
          <div
            class="icon-placeholder"
            data-icon-template="icon-menu-template"
            data-icon-size="18px"
          ></div>
        </span>
        <span class="toggle-label">Conversations</span>
      </button>
      <button
        id="historySidebarToggle"
        class="sidebar-toggle-btn sidebar-toggle-right"
        style="display: none"
        title="Toggle history sidebar"
      >
        <span class="toggle-label">History</span>
        <span class="toggle-icon">
          <div
            class="icon-placeholder"
            data-icon-template="icon-menu-template"
            data-icon-size="18px"
          ></div>
        </span>
      </button>

      <!-- Mobile Header Bar -->
      <div id="mobileHeader" class="mobile-header">
        <button id="mobileSidebarToggle" class="mobile-menu-btn">
          <div
            class="icon-placeholder"
            data-icon-template="icon-left-panel-open-template"
            data-icon-size="30px"
          ></div>
        </button>
        <div class="mobile-search-trigger-wrapper">
          <label for="mobileSearchTrigger" class="search-input-label"
            >Start Search</label
          >
          <input
            id="mobileSearchTrigger"
            class="mobile-search-trigger"
            type="text"
            placeholder="Search text..."
            readonly
          />
          <span class="mobile-search-trigger-icon">
            <div
              class="icon-placeholder"
              data-icon-template="icon-search-template"
              data-icon-size="24px"
            ></div>
          </span>
        </div>
        <button id="mobileNavBtn" class="mobile-menu-btn">
          <div
            class="icon-placeholder"
            data-icon-template="icon-menu-template"
            data-icon-size="30px"
          ></div>
        </button>
      </div>

      <!-- Mobile Navigation Overlay -->
      <div
        id="mobileNavOverlay"
        class="mobile-nav-overlay"
        style="display: none"
      ></div>

      <!-- Mobile Navigation Panel -->
      <div id="mobileNavPanel" class="mobile-nav-panel" style="display: none">
        <nav class="mobile-nav-content">
          <ul class="mobile-nav-list">
            <li>
              <a href="#" id="mobileNavHome" class="mobile-nav-item">
                <div
                  class="icon-placeholder"
                  data-icon-template="icon-home-template"
                  data-icon-size="20px"
                ></div>
                Home
              </a>
            </li>
            <li>
              <a href="#" id="mobileNavSettings" class="mobile-nav-item">
                <div
                  class="icon-placeholder"
                  data-icon-template="icon-settings-template"
                  data-icon-size="20px"
                ></div>
                Settings
              </a>
            </li>
            <li>
              <a href="#" id="mobileNavSearch" class="mobile-nav-item">
                <div
                  class="icon-placeholder"
                  data-icon-template="icon-search-template"
                  data-icon-size="20px"
                ></div>
                Search
              </a>
            </li>
          </ul>
          <div class="mobile-nav-footer">
            <a
              href="https://github.com/rosecolinlarry/DiscoBrowser"
              target="_blank"
              rel="noopener noreferrer"
              class="mobile-github-link"
            >
              <div
                class="icon-placeholder"
                data-icon-template="icon-github-template"
                data-icon-size="20px"
              ></div>
              <span>View on GitHub</span>
            </a>
          </div>
        </nav>
      </div>

      <!-- Blurred Sidebar Overlay -->
      <div
        id="sidebarOverlay"
        class="sidebar-overlay"
        style="display: none"
      ></div>

      <div class="header-container">
        <div>
          <h1>Disco Browser</h1>
        </div>
        <div style="display: flex; gap: 8px; align-items: center">
          <button
            id="settingsBtn"
            class="icon-only-btn"
            title="Open settings"
            aria-label="Open settings"
          >
            <div
              class="icon-placeholder"
              data-icon-template="icon-settings-template"
              data-icon-size="20px"
            ></div>
          </button>
          <a
            href="https://github.com/rosecolinlarry/DiscoBrowser"
            target="_blank"
            rel="noopener noreferrer"
            class="github-link"
            title="View on GitHub"
          >
            <div
              class="icon-placeholder"
              data-icon-template="icon-github-template"
              data-icon-size="24px"
              style="display: inline-flex; width: 24px; height: 24px"
            ></div>
          </a>
        </div>
      </div>

      <section id="controls" class="control-bar">
        <div id="search-bar" class="search-controls mobile-hide">
          <div class="search-input-wrapper">
            <label for="search" class="search-input-label">Search for</label>
            <input
              id="search"
              class="desktop-search search-input"
              placeholder="e.g. sandwich"
            />
            <button
              id="searchBtn"
              class="search-icon-btn mobile-hide"
              title="Search"
            >
              <div
                class="icon-placeholder"
                data-icon-template="icon-search-template"
                data-icon-size="30px"
              ></div>
            </button>
          </div>
          <div class="advanced-search-wrapper">
            <label class="toggle-input-label toggle-wrapper">
              <input type="checkbox" id="advancedSearchToggle" />
              <span class="toggle-slider"></span>
              <span class="toggle-label">Advanced Search</span>
            </label>
          </div>
          <div id="actor-filter-wrapper" class="filter-dropdown-wrapper">
            <button
              id="actorFilterBtn"
              class="filter-dropdown-button"
              type="button"
            >
              <span id="actorFilterLabel" class="filter-label">All Actors</span>
              <span class="dropdown-arrow">
                <div
                  class="icon-placeholder"
                  data-icon-template="icon-arrow-drop-down-template"
                  data-icon-size="18px"
                ></div>
              </span>
            </button>
            <div id="actorFilterDropdown" class="filter-dropdown">
              <label for="actorSearch" class="search-input-label"
                >Filter by Name</label
              >
              <input
                id="actorSearch"
                class="search-input"
                type="text"
                placeholder="e.g. Kim Kitsuragi"
              />
              <div class="filter-actions">
                <label class="checkbox-item select-all">
                  <input type="checkbox" id="selectAllActors" />
                  <span>Select All</span>
                </label>
                <button id="addToSelection" type="button" class="action-btn">
                  Add to Selection
                </button>
              </div>
              <div id="actorCheckboxList" class="checkbox-list"></div>
              <div class="filter-disclaimer">
                Note: Orbs and tasks with no assigned actor are not included in
                searches.
              </div>
            </div>
          </div>
          <div id="type-filter-wrapper" class="filter-dropdown-wrapper">
            <button
              id="typeFilterBtn"
              class="filter-dropdown-button"
              type="button"
            >
              <span id="typeFilterLabel" class="filter-label">All Types</span>
              <span class="dropdown-arrow">
                <div
                  class="icon-placeholder"
                  data-icon-template="icon-arrow-drop-down-template"
                  data-icon-size="18px"
                ></div>
              </span>
            </button>
            <div id="typeFilterDropdown" class="filter-dropdown">
              <div class="filter-actions">
                <label class="checkbox-item select-all">
                  <input type="checkbox" id="selectAllTypes" checked />
                  <span>Select All</span>
                </label>
              </div>
              <div id="typeCheckboxList" class="checkbox-list">
                <label class="checkbox-item type-flow">
                  <input type="checkbox" data-type="flow" checked />
                  <span>Flow</span>
                </label>
                <label class="checkbox-item type-orb">
                  <input type="checkbox" data-type="orb" checked />
                  <span>Orb</span>
                </label>
                <label class="checkbox-item type-task">
                  <input type="checkbox" data-type="task" checked />
                  <span>Task</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Advanced Search Options Row -->
          <div
            id="advancedSearchRow"
            class="advanced-search-row search-controls"
            style="display: none"
          >
            <div class="advanced-search-options">
              <div class="toggle-wrapper">
                <label class="toggle-input-label">
                  <input type="checkbox" id="wholeWordsCheckbox" />
                  <span class="toggle-slider"></span>
                  <span class="toggle-label">Whole Words</span>
                </label>
              </div>
              <div id="variable-search-wrapper" class="filter-dropdown-wrapper">
                <button
                  id="variableSearchBtn"
                  class="filter-dropdown-button"
                  type="button"
                >
                  <span id="variableSearchLabel" class="filter-label"
                    >Include Variables</span
                  >
                  <span class="dropdown-arrow">
                    <div
                      class="icon-placeholder"
                      data-icon-template="icon-arrow-drop-down-template"
                      data-icon-size="18px"
                    ></div>
                  </span>
                </button>
                <div id="variableSearchDropdown" class="filter-dropdown">
                  <div class="filter-actions">
                    <label class="checkbox-item select-all">
                      <input
                        type="checkbox"
                        id="selectAllVariableSearch"
                        data-include="all"
                        checked
                      />
                      <span>Select All</span>
                    </label>
                  </div>
                  <div id="variableSearchCheckboxList" class="checkbox-list">
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        id="includeVariablesCheckbox"
                        data-include="variables"
                        checked
                      />
                      <span>Variables</span>
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        id="includeDialogueCheckbox"
                        data-include="dialogue"
                        checked
                      />
                      <span>Dialogue</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button
            id="clearFiltersBtn"
            type="button"
            class="clear-filters-btn"
            title="Clear all filters"
          >
            Clear Filters
          </button>
        </div>
        <div id="searchLoader" class="loader hidden"></div>
        <div class="muted-text mobile-hide"></div>
      </section>

      <div id="browser" class="browser-grid">
        <section id="convoSection" class="section convo-section card">
          <div>
            <div class="sidebar-header">
              <h3>
                Conversations
                <span
                  class="help-icon"
                  title="Conversation Types:&#10;• FLOW - Conversations with NPCs&#10;• ORB - Thoughts from interacting with the environment&#10;• TASK - Player's quest log"
                  >?</span
                >
              </h3>
              <div id="convoSidebarClose">
                <span class="sidebar-close">
                  <div
                    class="icon-placeholder"
                    data-icon-template="icon-close-template"
                    data-icon-size="16px"
                  ></div>
                </span>
              </div>
            </div>
          </div>
          <div id="convoFilterContainer" class="convo-filter-container">
            <div class="filter-search-row">
              <label for="convoSearchInput" class="search-input-label"
                >Filter</label
              >
              <input
                id="convoSearchInput"
                class="search-input"
                type="text"
                placeholder="Title or Convo Id"
              />
            </div>
            <div class="filter-controls-row">
              <div id="convoTypeFilterRow" class="radio-button-group">
                <button
                  class="tree-control-btn radio-button type-badge type-all active"
                  data-type="all"
                >
                  All
                </button>
                <button
                  class="tree-control-btn radio-button type-badge type-flow"
                  data-type="flow"
                >
                  Flow
                </button>
                <button
                  class="tree-control-btn radio-button type-badge type-orb"
                  data-type="orb"
                >
                  Orb
                </button>
                <button
                  class="tree-control-btn radio-button type-badge type-task"
                  data-type="task"
                >
                  Task
                </button>
              </div>
              <div class="tree-controls-inline">
                <button
                  id="expandAllBtn"
                  class="tree-control-btn icon-only-btn"
                  title="Expand all conversations"
                  aria-label="Expand all conversations"
                >
                  <div
                    class="icon-placeholder"
                    data-icon-template="icon-expand-all-template"
                    data-icon-size="16px"
                  ></div>
                </button>
                <button
                  id="collapseAllBtn"
                  class="tree-control-btn icon-only-btn"
                  title="Collapse all conversations"
                  aria-label="Collapse all conversations"
                >
                  <div
                    class="icon-placeholder"
                    data-icon-template="icon-collapse-all-template"
                    data-icon-size="16px"
                  ></div>
                </button>
              </div>
            </div>
          </div>
          <div id="convoList" class="convo-list scrolling-card tree">
            <div class="loader"></div>
          </div>
        </section>
        <section id="entries-section" class="section entries-section">
          <!-- Homepage (shown by default) -->
          <div id="homePageContainer" class="card home-page-card">
            <div>
              <div>
                <h2>Welcome to Disco Browser</h2>
              </div>
              <div id="inspired-by-blurb" class="small-text">
                <span
                  >Inspired by
                  <a
                    href="https://fayde.co.uk/"
                    target="_blank"
                    rel="noopener noreferrer"
                    >FAYDE Playback Experiment: On-Air</a
                  ></span
                >
              </div>
            </div>
            <p>
              This is an interactive browser for <em>Disco Elysium</em> dialogue
              trees. Explore conversations, track dialogue paths, and search
              through the game's rich narrative.
            </p>

            <h3>Getting Started</h3>
            <ul>
              <li>
                <strong>Browse Conversations:</strong> Select a conversation
                from the tree on the left to view its dialogue options
              </li>
              <li>
                <strong>Navigate Dialogue:</strong> Click on dialogue options to
                explore branching paths
              </li>
            </ul>

            <h3>History &amp; Navigation</h3>
            <ul>
              <li>
                <strong>History Panel:</strong> Every dialogue entry you visit
                is automatically logged in the history panel on the right. Your
                current location is highlighted and non-clickable at the bottom
              </li>
              <li>
                <strong>Jump to Any Point:</strong> Click any previous entry in
                the history to instantly return to that exact moment in the
                conversation. This lets you explore different dialogue branches
                without losing your place
              </li>
              <li>
                <strong>Back Button:</strong> Use the back button (or browser
                back) to step backward one entry at a time through your
                navigation history
              </li>
              <li>
                <strong>Return to Root:</strong> The restart button takes you
                back to the beginning of the current conversation, clearing all
                navigation history for that conversation
              </li>
              <li>
                <strong>Browser Integration:</strong> Your browser's
                forward/back buttons work seamlessly with the history system, so
                you can navigate like any web page
              </li>
            </ul>

            <h3>Conversation Types</h3>
            <ul>
              <li>
                <span class="type-badge type-flow">FLOW</span> Standard NPC
                conversations with branching dialogue
              </li>
              <li>
                <span class="type-badge type-orb">ORB</span> Environmental
                interactions and observations
              </li>
              <li>
                <span class="type-badge type-task">TASK</span> Quest log entries
                and objectives
              </li>
            </ul>

            <h3>Search Features</h3>
            <ul>
              <li>
                <strong>Multi-Word Search:</strong> Type multiple words
                separated by spaces - the search finds entries containing all
                words (e.g., "kim jacket" finds entries with both "kim" and
                "jacket" anywhere in the text)
              </li>
              <li>
                <strong>Exact Phrase Search:</strong> Put your query in "quotes"
                to match the exact phrase in order (e.g., "you don't" only
                matches that specific phrase)
              </li>
              <li>
                <strong>Whole Words:</strong> Check the "Whole Words" option to
                match complete words only (e.g., "you" won't match "yourself" or
                "youth")
              </li>
              <li>
                <strong>Filter by Actors:</strong> Search within specific
                characters' dialogue using the actor dropdown
              </li>
              <li>
                <strong>Filter by Type:</strong> Show only flows, orbs, or tasks
                in search results
              </li>
              <li>
                <strong>Filter by Conversation:</strong> On mobile, use the
                conversation filter to search within specific conversations
              </li>
            </ul>

            <p class="hint-text">
              Select a conversation from the left sidebar to begin exploring!
            </p>

            <div
              style="
                display: flex;
                justify-content: center;
                align-content: center;
                flex-direction: column;
              "
            >
              <div
                style="
                  align-items: center;
                  display: flex;
                  justify-content: center;
                "
              >
                <a
                  href="https://github.com/rosecolinlarry/DiscoBrowser"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="github-link"
                  title="View on GitHub"
                >
                  <div
                    class="icon-placeholder"
                    data-icon-template="icon-github-template"
                    data-icon-size="24px"
                    style="display: inline-flex; width: 24px; height: 24px"
                  ></div>
                </a>
                <span style="font-size: medium">View on GitHub</span>
              </div>
            </div>
          </div>

          <!-- Dialogue content (hidden by default) -->
          <div
            id="dialogueContent"
            class="dialogue-content"
            style="display: none"
          >
            <h3>Dialogue</h3>
            <div id="currentEntryContainer" class="card current-entry-card">
              <div id="entryOverview">(select an entry)</div>
              <details id="moreDetails" class="more-details details">
                <summary>More Details</summary>
                <div id="entryDetails">(select an entry)</div>
              </details>
            </div>
            <div class="entry-list">
              <h4 id="entryListHeader">Next Dialogue Options:</h4>
              <div id="entryList" class="scrolling-card">
                (select a conversation)
              </div>
            </div>
          </div>
        </section>
        <section id="historySection" class="section history-section card">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <h4>History</h4>
            <div id="historySidebarClose">
              <span class="sidebar-close">
                <div
                  class="icon-placeholder"
                  data-icon-template="icon-close-template"
                  data-icon-size="16px"
                ></div>
              </span>
            </div>
          </div>
          <div
            id="chatLog"
            class="scrolling-card chat-log"
            title="Click an entry to jump back to that point"
          ></div>
          <div id="backButtonContainer" class="button-row">
            <button
              id="backBtn"
              title="Go back to previous entry"
              class="undo-icon-button"
              disabled
            >
              <div
                class="icon-placeholder"
                data-icon-template="icon-undo-template"
                data-icon-size="20px"
              ></div>
            </button>
            <button
              id="convoRootBtn"
              title="Return to conversation root"
              class="restart-icon-button"
              disabled
            >
              <div
                class="icon-placeholder"
                data-icon-template="icon-text-select-jump-to-beginning-template"
                data-icon-size="20px"
              ></div>
            </button>
            <span id="backStatus" class="muted-text history-steps-count"></span>
          </div>
        </section>
      </div>
    </main>

    <!-- Conversation Types Modal for mobile and table -->
    <div
      id="conversationTypesModalOverlay"
      class="modal-overlay"
      style="display: none"
    >
      <div
        class="modal"
        role="dialog"
        aria-labelledby="conversationTypesModalTitle"
        aria-modal="true"
      >
        <div class="modal-header">
          <h3 id="conversationTypesModalTitle">Conversation Types</h3>
          <button
            id="conversationTypesModalClose"
            class="modal-close"
            aria-label="Close"
          >
            <div
              class="icon-placeholder"
              data-icon-template="icon-close-template"
              data-icon-size="16px"
            ></div>
          </button>
        </div>
        <div class="modal-body">
          <ul class="modal-type-list">
            <li>
              <span class="type-badge type-flow">FLOW</span> Standard NPC
              conversations with branching dialogue
            </li>
            <li>
              <span class="type-badge type-orb">ORB</span> Environmental
              interactions and observations
            </li>
            <li>
              <span class="type-badge type-task">TASK</span> Quest log entries
              and objectives
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModalOverlay" class="modal-overlay" style="display: none">
      <div
        class="modal settings-modal"
        role="dialog"
        aria-labelledby="settingsModalTitle"
        aria-modal="true"
      >
        <div class="modal-header">
          <h3 id="settingsModalTitle">Settings</h3>
          <button
            id="settingsModalClose"
            class="modal-close"
            aria-label="Close"
          >
            <div
              class="icon-placeholder"
              data-icon-template="icon-close-template"
              data-icon-size="16px"
            ></div>
          </button>
        </div>
        <div class="modal-body settings-body">
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="resetDesktopLayoutCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label">Reset desktop layout</span>
            </label>
            <p class="settings-description">
              Resets the layout to the default column sizes and positions.
              (Desktop Only)
            </p>
          </div>
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="disableColumnResizingCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label">Disable column resizing</span>
            </label>
            <p class="settings-description">
              Hides and disables the ability to resize columns. (Desktop Only)
            </p>
          </div>
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="alwaysShowMoreDetailsCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label">Always show more details</span>
            </label>
            <p class="settings-description">
              Automatically expands the More Details section when viewing
              entries.
            </p>
          </div>
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="showHiddenCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label">Show hidden</span>
            </label>
            <p class="settings-description">
              Include conversations and entries marked as hidden.
            </p>
          </div>
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="turnOffAnimationsCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label">Turn off animations</span>
            </label>
            <p class="settings-description">
              Disables all animations throughout the application.
            </p>
          </div>
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="enableAdvancedSearchCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label">Enable Advanced Search</span>
            </label>
            <p class="settings-description">
              Show the Advanced Search options below the main search.
            </p>
          </div>
          <div class="settings-section">
            <label class="settings-checkbox">
              <input type="checkbox" id="useOriginalTitlesCheckbox" />
              <span class="checkbox-custom"></span>
              <span class="checkbox-label"
                >Show original conversation titles</span
              >
            </label>
            <p class="settings-description">
              Toggle to show original titles instead of reformatted display
              titles.
            </p>
          </div>
          <div class="settings-actions">
            <button id="restoreDefaultSettingsBtn" class="action-btn">
              Restore Default Settings
            </button>
            <button id="saveSettingsBtn" class="primary-btn">
              Save Settings
            </button>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
